{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = '38212376-ffcb529addc704f756c0c7d48';\nconst baseURL = 'https://pixabay.com/api/';\naxios.defaults.baseURL = baseURL;\n\nexport const getImagesByQuery = async (query, page) => {\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};","import simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector('.gallery');\n\nexport function createGallery(images, isUpdate = false) {\n  const markup = images.map(image => createImageMarkup(image)).join('');\n  if (isUpdate) {\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n  } else {\n    galleryContainer.innerHTML = markup;\n  }\n\n  const lightbox = new simpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n  lightbox.refresh();\n\n  return lightbox;\n};\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('hidden');\n  }\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('hidden');\n  }\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.classList.remove('hidden');\n  }\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.classList.add('hidden');\n  }\n}\n\nfunction createImageMarkup({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return `<li class=\"gallery__item\">\n    <a class=\"gallery__link\" href=\"${largeImageURL}\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b> <span>${likes}</span>\n          </p>\n          <p class=\"info-item\">\n          <b>Views</b> <span>${views}</span>\n          </p>\n          <p class=\"info-item\">\n          <b>Comments</b> <span>${comments}</span>\n          </p>\n          <p class=\"info-item\">\n          <b>Downloads</b> <span>${downloads}</span>\n          </p>\n          </div>\n          </li>`;\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\nlet hits = [];\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  query = searchForm.elements[\"search-text\"].value;\n  if (!query) {\n    showError('Please enter a search query.');\n    return;\n  }\n\n  page = 1;\n  totalHits = 0;\n  hideLoadMoreButton();\n\n  showLoader();\n  clearGallery();\n\n  try {\n    const data = await getImagesByQuery(query);\n    totalHits = data.totalHits;\n    hits = data.hits;\n    if (hits.length === 0) {\n      showError('Sorry, there are no images matching your search query. Please try again!');\n      hideLoader();\n      event.target.reset();\n      return;\n    }\n\n    createGallery(hits);\n    if (totalHits > 15) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    showError('An error occurred while fetching images. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n\n  event.target.reset();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    if (data.hits.length === 0) {\n      showError('No more images found.');\n      hideLoadMoreButton();\n      return;\n    }\n\n    hits = [...hits, ...data.hits];\n\n    createGallery(hits);\n\n    let card = document.querySelector('.gallery__item');\n    let rect = card.getBoundingClientRect();\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth'\n    });\n\n    if (page * 15 >= totalHits) {\n      hideLoadMoreButton();\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showError('An error occurred while loading more images. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 3000,\n    transitionIn: 'fadeInDown',\n    transitionOut: 'fadeOutUp',\n    close: true,\n    color: '#EF4040',\n    titleColor: '#FAFAFB',\n    messageColor: '#FAFAFB',\n    iconColor: '#FAFAFB',\n  });\n}\n\nfunction showMessage(message) {\n  iziToast.info({\n    title: 'Info',\n    message: message,\n    position: 'topRight',\n    timeout: 3000,\n    transitionIn: 'fadeInDown',\n    transitionOut: 'fadeOutUp',\n    close: true,\n    color: '#4CAF50',\n    titleColor: '#FAFAFB',\n    messageColor: '#FAFAFB',\n    iconColor: '#FAFAFB',\n  });\n}"],"names":["apiKey","baseURL","axios","getImagesByQuery","query","page","error","galleryContainer","createGallery","images","isUpdate","markup","image","createImageMarkup","lightbox","simpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","totalHits","hits","event","showError","data","rect","showMessage","message","iziToast"],"mappings":"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"}